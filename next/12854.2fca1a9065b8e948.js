(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[12854],{12854:(t,e,n)=>{n.r(e),n.d(e,{default:()=>D});var a,i=n(97270),o=n(81359),r=n(37550),s=n(87742),l=n(62354),c=n(3948),h=n(7287),g=n(42992),d=n(55514),u=n(76145),f=n(57352),m=n(3934);function p(t,e){if(1&t&&(r.j41(0,"span",5)(1,"small",7),r.EFF(2),r.k0s()()),2&t){const t=e.$index;r.R7$(2),r.SpI("Chart ",t+1,"")}}function y(t,e){if(1&t&&(r.nrm(0,"tui-line-days-chart",8),r.nI1(1,"tuiFilter")),2&t){const t=e.$implicit,n=r.XpG(3);r.Y8G("height",200)("value",r.brH(1,2,t,n.filter,n.range))}}function C(t,e){if(1&t&&r.Z7z(0,y,2,6,"tui-line-days-chart",8,r.fX1),2&t){const t=r.XpG(2);r.Dyx(t.days)}}function x(t,e){if(1&t&&(r.nrm(0,"tui-line-chart",9),r.nI1(1,"tuiFilter"),r.nI1(2,"tuiMapper")),2&t){const t=e.$implicit,n=r.XpG(3);r.Y8G("height",200)("value",r.brH(2,7,r.brH(1,3,t,n.filter,n.range),n.toNumbers,n.range))("width",n.getWidth(n.range))}}function w(t,e){if(1&t&&r.Z7z(0,x,3,11,"tui-line-chart",9,r.fX1),2&t){const t=r.XpG(2);r.Dyx(t.days)}}function M(t,e){if(1&t&&(r.j41(0,"tui-axes",6),r.DNE(1,C,2,0)(2,w,2,0),r.k0s()),2&t){const t=e,n=r.XpG(),a=r.sdS(15);r.Y8G("axisXLabels",t)("horizontalLines",4)("tuiLineChartHint",a)("verticalLines",t.length-1),r.R7$(),r.vxM(n.getWidth(n.show)>90?1:2)}}function b(t,e){if(1&t&&(r.j41(0,"div",5)(1,"span",11),r.EFF(2),r.k0s()()),2&t){const t=e.$implicit;r.R7$(2),r.SpI("$",t[1].toFixed(0),"")}}function v(t,e){if(1&t&&(r.j41(0,"div",10)(1,"strong"),r.EFF(2),r.k0s()(),r.j41(3,"div"),r.Z7z(4,b,3,1,"div",5,r.fX1),r.k0s()),2&t){const t=e.$implicit,n=r.XpG();r.R7$(2),r.JRh(n.getDate(t[0][0],n.range.from)),r.R7$(2),r.Dyx(t)}}class D{constructor(){this.isE2E=(0,r.WQX)(c.Hs4),this.months$=(0,r.WQX)(h.FmP),this.data=new c.aBC(c.JKS.currentLocal(),c.JKS.currentLocal().append({month:5})),this.show=this.data,this.days=this.random(this.data),this.maxLength={month:6},this.filter=([t],{from:e,to:n})=>t.daySameOrAfter(e)&&t.daySameOrBefore(n),this.toNumbers=(t,{from:e})=>t.map((([t,n])=>[c.JKS.lengthBetween(e,t),n]))}get range(){return this.computeRange(this.show)}getWidth({from:t,to:e}){return c.JKS.lengthBetween(t,e)}getDate(t,e){return t instanceof c.JKS?t:e.append({day:t})}labels({from:t,to:e}){const n=c.JKS.lengthBetween(t,e);if(n>90)return this.months$.pipe((0,d.T)((n=>[...Array.from({length:c.x_Y.lengthBetween(t,e)+1},((e,a)=>n[t.append({month:a}).month]??"")),""])));const a=Array.from({length:n},((e,n)=>t.append({day:n}))),i=function(t){return t.filter((t=>!t.dayOfWeek())).map(String)}(a),o=a.map(String);return n>60?(0,u.of)([...k(i),""]):n>14?(0,u.of)([...i,""]):n>7?(0,u.of)([...k(o),""]):(0,u.of)([...o,""])}onDataChange(t){this.days=this.random(t)}computeRange(t){const{from:e,to:n}=t,a=c.JKS.lengthBetween(e,n),i=e.dayOfWeek(),o=n.dayOfWeek(),r=i?e.append({day:7-i}):e,s=o?n.append({day:7-o}):n,l=c.JKS.lengthBetween(r,s);return a>90?t:a>60?new c.aBC(r,s.append({day:l%14})):a>14?new c.aBC(r,s):new c.aBC(e,n.append({day:a%2}))}generateRandomData({from:t,to:e},n){return new Array(c.JKS.lengthBetween(t,e)+1).fill(0).reduce(((e,a,i)=>[...e,[t.append({day:i}),this.isE2E?n:Math.max((i?e[i-1]?.[1]??0:n)+10*Math.random()-5,0)]]),[]).filter((([t])=>t.dayOfWeek()<5))}random(t){return[this.generateRandomData(t,100),this.generateRandomData(t,75),this.generateRandomData(t,50)]}}function k(t){return t.filter(((t,e)=>!(e%2)))}(a=D).ɵfac=function(t){return new(t||a)},a.ɵcmp=r.VBU({type:a,selectors:[["ng-component"]],decls:16,vars:7,consts:[["hint",""],[1,"controls"],[3,"ngModelChange","maxLength","ngModel"],[1,"tui-space_left-4",3,"ngModelChange","maxLength","ngModel"],[1,"legend"],[1,"item"],[1,"axes",3,"axisXLabels","horizontalLines","tuiLineChartHint","verticalLines"],[1,"name"],[1,"chart",3,"height","value"],[1,"chart",3,"height","value","width"],[1,"tui-space_bottom-2"],[1,"value"]],template:function(t,e){if(1&t){const t=r.RV6();r.j41(0,"tui-notification")(1,"code"),r.EFF(2,"TuiLineDaysChart"),r.k0s(),r.EFF(3," is used to show data of several months to simplify working with different number of days in months\n"),r.k0s(),r.j41(4,"p",1)(5,"tui-input-date-range",2),r.mxI("ngModelChange",(function(n){return r.eBV(t),r.DH7(e.data,n)||(e.data=n),r.Njj(n)})),r.bIt("ngModelChange",(function(n){return r.eBV(t),r.Njj(e.onDataChange(n))})),r.EFF(6," Data "),r.k0s(),r.j41(7,"tui-input-date-range",3),r.mxI("ngModelChange",(function(n){return r.eBV(t),r.DH7(e.show,n)||(e.show=n),r.Njj(n)})),r.EFF(8," Visible range "),r.k0s()(),r.j41(9,"p",4),r.Z7z(10,p,3,1,"span",5,r.fX1),r.k0s(),r.DNE(12,M,3,5,"tui-axes",6),r.nI1(13,"async"),r.DNE(14,v,6,1,"ng-template",null,0,r.C5r)}if(2&t){let t;r.R7$(5),r.Y8G("maxLength",e.maxLength),r.R50("ngModel",e.data),r.R7$(2),r.Y8G("maxLength",e.maxLength),r.R50("ngModel",e.show),r.R7$(3),r.Dyx(e.days),r.R7$(2),r.vxM((t=r.bMT(13,5,e.labels(e.show)))?12:-1,t)}},dependencies:[o.Jj,s.YN,s.BC,s.vS,l.uy,c.LSY,g.CwF,f.D,m.N,l.Lx,l.S,l.fd,c.uAY,h.wSS],styles:['.axes[_ngcontent-%COMP%]{block-size:12.5rem}.controls[_ngcontent-%COMP%]{display:flex}.controls[_ngcontent-%COMP%]   tui-input-date-range[_ngcontent-%COMP%]{flex:1}.legend[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.item[_ngcontent-%COMP%]{color:var(--tui-chart-categorical-01);display:flex;align-items:center;margin:0 .75rem}.item[_ngcontent-%COMP%]:first-child{color:var(--tui-chart-categorical-08)}.item[_ngcontent-%COMP%]:last-child{color:var(--tui-chart-categorical-12)}.item[_ngcontent-%COMP%]:before{content:"";border-block-end:.125rem solid;inline-size:1rem;margin-inline-end:.5rem}.name[_ngcontent-%COMP%]{color:var(--tui-text-primary)}.value[_ngcontent-%COMP%]{color:#fff}.chart[_ngcontent-%COMP%]{color:var(--tui-chart-categorical-01);position:absolute;top:0;left:0;inline-size:100%;block-size:100%}.chart[_ngcontent-%COMP%]:first-child{color:var(--tui-chart-categorical-08)}.chart[_ngcontent-%COMP%]:last-child{color:var(--tui-chart-categorical-12)}'],changeDetection:0}),(0,i.Cg)([c.PEb],D.prototype,"getWidth",null),(0,i.Cg)([c.PEb],D.prototype,"getDate",null),(0,i.Cg)([c.PEb],D.prototype,"labels",null),(0,i.Cg)([c.PEb],D.prototype,"computeRange",null),(0,i.Cg)([c.PEb],D.prototype,"generateRandomData",null)}}]);