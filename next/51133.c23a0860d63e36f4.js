(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[51133],{51133:(t,e,n)=>{n.r(e),n.d(e,{default:()=>V});var i=n(76733),o=n(72133),a=n(90860),u=n(87882),r=n(93317),s=n(97733),c=n(56424),l=n(38442),d=n(20155),h=n(84787),g=n(73843),p=n(88557),m=n(92425),f=n(55333),T=n(1925),b=n(20755),x=n(5330),C=n(22250),Z=n(92437),J=n(45991),A=n(87294),w=n(62601),M=n(8127),y=n(36433),$=n(26923),D=n(90514),q=n(70151),N=n(4732),Q=n(59915),_=n(13117),v=n(93815),O=n(90096),U=n(52891),L=n(59311);function S(t,e){if(1&t){const t=b.EpF();b.TgZ(0,"tui-reorder",7),b.NdJ("itemsChange",(function(e){b.CHM(t);const n=b.oxw();return b.KtG(n.initial=e)}))("enabledChange",(function(e){b.CHM(t);const n=b.oxw();return b.KtG(n.onEnabled(e))})),b.qZA()}if(2&t){const t=b.oxw();b.Q6J("enabled",t.enabled)("items",t.initial)}}function B(t,e){1&t&&(b.TgZ(0,"th",14),b._uU(1," Name "),b.qZA())}function k(t,e){1&t&&(b.TgZ(0,"th",14),b._uU(1," Date of Birth "),b.qZA())}function H(t,e){1&t&&(b.TgZ(0,"th",14),b._uU(1," Age "),b.qZA())}function I(t,e){if(1&t&&(b.TgZ(0,"td",19),b._uU(1),b.qZA()),2&t){const t=b.oxw().$implicit,e=b.oxw(3);b.ekj("match",e.isMatch(t.name)),b.xp6(1),b.hij(" ",t.name," ")}}function P(t,e){if(1&t&&(b.TgZ(0,"td",19),b._uU(1),b.qZA()),2&t){const t=b.oxw().$implicit,e=b.oxw(3);b.ekj("match",e.isMatch(t.dob)),b.xp6(1),b.hij(" ",t.dob," ")}}function Y(t,e){if(1&t&&(b.TgZ(0,"td",19),b._uU(1),b.qZA()),2&t){const t=b.oxw().$implicit,e=b.oxw(3);b.ekj("match",e.isMatch(e.getAge(t))),b.xp6(1),b.hij(" ",e.getAge(t)," ")}}function j(t,e){1&t&&(b.TgZ(0,"tr",17),b.YNc(1,I,2,3,"td",18),b.YNc(2,P,2,3,"td",18),b.YNc(3,Y,2,3,"td",18),b.qZA()),2&t&&(b.xp6(1),b.Q6J("tuiCell","name"),b.xp6(1),b.Q6J("tuiCell","dob"),b.xp6(1),b.Q6J("tuiCell","age"))}function z(t,e){if(1&t&&(b.TgZ(0,"tbody",15),b.YNc(1,j,4,3,"tr",16),b.qZA()),2&t){const t=e.tuiLet;b.Q6J("data",t),b.xp6(1),b.Q6J("ngForOf",t)}}function F(t,e){if(1&t){const t=b.EpF();b.TgZ(0,"table",8),b.NdJ("directionChange",(function(e){b.CHM(t);const n=b.oxw();return b.KtG(n.direction$.next(e))}))("tuiSortByChange",(function(e){b.CHM(t);const n=b.oxw();return b.KtG(n.sorter$.next(e))})),b.ALo(1,"async"),b.ALo(2,"async"),b.TgZ(3,"thead")(4,"tr",9),b.YNc(5,B,2,0,"th",10),b.YNc(6,k,2,0,"th",10),b.YNc(7,H,2,0,"th",10),b.qZA()(),b.YNc(8,z,2,2,"tbody",11),b.ALo(9,"tuiTableSort"),b.TgZ(10,"tfoot")(11,"tr")(12,"td",12)(13,"tui-table-pagination",13),b.NdJ("paginationChange",(function(e){b.CHM(t);const n=b.oxw();return b.KtG(n.onPagination(e))})),b.ALo(14,"async"),b.qZA()()()()()}if(2&t){const t=e.ngIf,n=b.oxw();b.Q6J("columns",n.columns)("direction",b.lcZ(1,9,n.direction$)||1)("tuiSortBy",b.lcZ(2,11,n.sorter$)),b.xp6(5),b.Q6J("tuiHead","name"),b.xp6(1),b.Q6J("tuiHead","dob"),b.xp6(1),b.Q6J("tuiHead","age"),b.xp6(1),b.Q6J("tuiLet",b.lcZ(9,13,t)),b.xp6(4),b.Q6J("colSpan",n.columns.length),b.xp6(1),b.Q6J("total",b.lcZ(14,15,n.total$)||0)}}const E=u.TuiDay.currentLocal(),K=["John","Jane","Jack","Jill","James","Joan","Jim","Julia","Joe","Julia"],G=["Smith","West","Brown","Jones","Davis","Miller","Johnson","Jackson","Williams","Wilson"],X=Array.from({length:300},(()=>({name:`${G[Math.floor(10*Math.random())]}, ${K[Math.floor(10*Math.random())]}`,dob:E.append({day:-Math.floor(4e3*Math.random())-7500})}))),W={Name:"name",Age:"age","Date of Birth":"dob"};function R({dob:t}){const e=E.year-t.year,n=E.month-t.month,i=E.day-t.day;return e+(0,u.tuiToInt)(n>0||!n&&i>9)}const V=(()=>{var t;class e{constructor(){this.size$=new c.X(10),this.page$=new c.X(0),this.direction$=new c.X(-1),this.sorter$=new c.X("name"),this.minAge=new o.NI(21),this.request$=(0,l.a)([this.sorter$,this.direction$,this.page$,this.size$,(0,u.tuiControlValue)(this.minAge)]).pipe((0,d.b)(0),(0,h.w)((t=>this.getData(...t).pipe((0,g.O)(null)))),(0,p.B)()),this.initial=["Name","Date of Birth","Age"],this.enabled=this.initial,this.columns=["name","dob","age"],this.search="",this.loading$=this.request$.pipe((0,m.U)(u.tuiIsFalsy)),this.total$=this.request$.pipe((0,f.h)(u.tuiIsPresent),(0,m.U)((({length:t})=>t)),(0,g.O)(1)),this.data$=this.request$.pipe((0,f.h)(u.tuiIsPresent),(0,m.U)((t=>t.filter(u.tuiIsPresent))),(0,g.O)([])),this.getAge=R}onEnabled(t){this.enabled=t,this.columns=this.initial.filter((e=>t.includes(e))).map((t=>W[t]))}onDirection(t){this.direction$.next(t)}onPagination({page:t,size:e}){this.page$.next(t),this.size$.next(e)}isMatch(t){return!!this.search&&(0,u.TUI_DEFAULT_MATCHER)(t,this.search)}getData(t,e,n,i,o){console.info("Making a request");const a=n*i,r=a+i,s=[...X].sort(function(t,e){return(n,i)=>"age"===t?e*(0,u.tuiDefaultSort)(R(n),R(i)):e*(0,u.tuiDefaultSort)(n[t],i[t])}(t,e)).filter((t=>R(t)>=o)).map(((t,e)=>e>=a&&e<r?t:null));return(0,T.H)(3e3).pipe((0,m.U)((()=>s)))}}return(t=e).ɵfac=function(e){return new(e||t)},t.ɵcmp=b.Xpm({type:t,selectors:[["ng-component"]],standalone:!0,features:[b.jDz],decls:13,vars:11,consts:[["tuiTextfieldSize","m",1,"filters"],[1,"input",3,"tuiTextfieldCleaner","ngModel","ngModelChange"],["decimal","never",1,"tui-space_horizontal-3",3,"formControl"],["size","m","tuiButton","","tuiChevron","","tuiDropdownOpen","","type","button",3,"tuiDropdown"],["dropdown",""],[3,"overlay","showLoader"],["tuiTable","","class","table",3,"columns","direction","tuiSortBy","directionChange","tuiSortByChange",4,"ngIf"],[1,"columns",3,"enabled","items","itemsChange","enabledChange"],["tuiTable","",1,"table",3,"columns","direction","tuiSortBy","directionChange","tuiSortByChange"],["tuiThGroup",""],["tuiSortable","","tuiTh","",4,"tuiHead"],["tuiTbody","",3,"data",4,"tuiLet"],[3,"colSpan"],[1,"tui-space_top-2",3,"total","paginationChange"],["tuiSortable","","tuiTh",""],["tuiTbody","",3,"data"],["tuiTr","",4,"ngFor","ngForOf"],["tuiTr",""],["tuiTd","",3,"match",4,"tuiCell"],["tuiTd",""]],template:function(t,e){if(1&t&&(b.TgZ(0,"p",0)(1,"tui-input",1),b.NdJ("ngModelChange",(function(t){return e.search=t})),b._uU(2," Find on page "),b.qZA(),b.TgZ(3,"tui-input-number",2),b._uU(4," Minimum age "),b.qZA(),b.TgZ(5,"button",3),b._uU(6," Columns "),b.qZA(),b.YNc(7,S,1,2,"ng-template",null,4,b.W1O),b.qZA(),b.TgZ(9,"tui-loader",5),b.ALo(10,"async"),b.YNc(11,F,15,17,"table",6),b.ALo(12,"async"),b.qZA()),2&t){const t=b.MAs(8);b.xp6(1),b.Q6J("tuiTextfieldCleaner",!0)("ngModel",e.search),b.xp6(2),b.Q6J("formControl",e.minAge),b.xp6(2),b.Q6J("tuiDropdown",t),b.xp6(4),b.Q6J("overlay",!0)("showLoader",!!b.lcZ(10,7,e.loading$)),b.xp6(2),b.Q6J("ngIf",b.lcZ(12,9,e.data$))}},dependencies:[a.TuiTable,x.c,C.j,Z.E,J.W,A.K,w.f,M.B,y.D,$.P,D.g,q.y,r.TuiTextfieldControllerModule,N.b,Q.s,s.TuiInputModule,_.K,v.w,s.TuiInputNumberModule,O.q,U.g,a.TuiReorderComponent,r.TuiLoaderModule,L.k,i.Ov,i.O5,a.TuiTablePaginationComponent,o.UX,o.JJ,o.oH,r.TuiDropdownDirective,r.TuiButtonDirective,s.TuiChevronDirective,r.TuiDropdownOpenDirective,o.u5,o.On,i.sg,u.TuiLetDirective],styles:[".table[_ngcontent-%COMP%]{width:100%}.filters[_ngcontent-%COMP%]{display:flex}.input[_ngcontent-%COMP%]{flex:1}.columns[_ngcontent-%COMP%]{width:10.625rem}.match[_ngcontent-%COMP%]{background:var(--tui-selection)}"],changeDetection:0}),e})()}}]);