(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[12854],{12854:(t,e,n)=>{n.r(e),n.d(e,{default:()=>R});var a,i=n(97270),r=n(81359),o=n(37550),l=n(87742),s=n(62354),c=n(64870),h=n(2573),d=n(55514),u=n(76145),g=n(11540),f=n(51944),m=n(25083);function p(t,e){1&t&&o.nrm(0,"tui-calendar-range")}function y(t,e){1&t&&o.nrm(0,"tui-calendar-range")}function C(t,e){if(1&t&&(o.j41(0,"span",8)(1,"small",10),o.EFF(2),o.k0s()()),2&t){const t=e.$index;o.R7$(2),o.SpI("Chart ",t+1,"")}}function x(t,e){if(1&t&&(o.nrm(0,"tui-line-days-chart",11),o.nI1(1,"tuiFilter")),2&t){const t=e.$implicit,n=o.XpG(3);o.Y8G("height",200)("value",o.brH(1,2,t,n.filter,n.range))}}function b(t,e){if(1&t&&o.Z7z(0,x,2,6,"tui-line-days-chart",11,o.fX1),2&t){const t=o.XpG(2);o.Dyx(t.days)}}function w(t,e){if(1&t&&(o.nrm(0,"tui-line-chart",12),o.nI1(1,"tuiFilter"),o.nI1(2,"tuiMapper")),2&t){const t=e.$implicit,n=o.XpG(3);o.Y8G("height",200)("value",o.brH(2,7,o.brH(1,3,t,n.filter,n.range),n.toNumbers,n.range))("width",n.getWidth(n.range))}}function k(t,e){if(1&t&&o.Z7z(0,w,3,11,"tui-line-chart",12,o.fX1),2&t){const t=o.XpG(2);o.Dyx(t.days)}}function M(t,e){if(1&t&&(o.j41(0,"tui-axes",9),o.DNE(1,b,2,0)(2,k,2,0),o.k0s()),2&t){const t=e,n=o.XpG(),a=o.sdS(21);o.Y8G("axisXLabels",t)("horizontalLines",4)("tuiLineChartHint",a)("verticalLines",t.length-1),o.R7$(),o.vxM(n.getWidth(n.show)>90?1:2)}}function v(t,e){if(1&t&&(o.j41(0,"div",8)(1,"span",14),o.EFF(2),o.k0s()()),2&t){const t=e.$implicit;o.R7$(2),o.SpI("$",t[1].toFixed(0),"")}}function D(t,e){if(1&t&&(o.j41(0,"div",13)(1,"strong"),o.EFF(2),o.k0s()(),o.j41(3,"div"),o.Z7z(4,v,3,1,"div",8,o.fX1),o.k0s()),2&t){const t=e.$implicit,n=o.XpG();o.R7$(2),o.JRh(n.getDate(t[0][0],n.range.from)),o.R7$(2),o.Dyx(t)}}class R{constructor(){this.isE2E=(0,o.WQX)(c.Hs4),this.months$=(0,o.WQX)(h.FmP),this.data=new c.aBC(c.JKS.currentLocal(),c.JKS.currentLocal().append({month:5})),this.show=this.data,this.days=this.random(this.data),this.maxLength={month:6},this.filter=([t],{from:e,to:n})=>t.daySameOrAfter(e)&&t.daySameOrBefore(n),this.toNumbers=(t,{from:e})=>t.map((([t,n])=>[c.JKS.lengthBetween(e,t),n]))}get range(){return this.computeRange(this.show)}getWidth({from:t,to:e}){return c.JKS.lengthBetween(t,e)}getDate(t,e){return t instanceof c.JKS?t:e.append({day:t})}labels({from:t,to:e}){const n=c.JKS.lengthBetween(t,e);if(n>90)return this.months$.pipe((0,d.T)((n=>[...Array.from({length:c.x_Y.lengthBetween(t,e)+1},((e,a)=>n[t.append({month:a}).month]??"")),""])));const a=Array.from({length:n},((e,n)=>t.append({day:n}))),i=function(t){return t.filter((t=>!t.dayOfWeek())).map(String)}(a),r=a.map(String);return n>60?(0,u.of)([...E(i),""]):n>14?(0,u.of)([...i,""]):n>7?(0,u.of)([...E(r),""]):(0,u.of)([...r,""])}onDataChange(t){this.days=this.random(t)}computeRange(t){const{from:e,to:n}=t,a=c.JKS.lengthBetween(e,n),i=e.dayOfWeek(),r=n.dayOfWeek(),o=i?e.append({day:7-i}):e,l=r?n.append({day:7-r}):n,s=c.JKS.lengthBetween(o,l);return a>90?t:a>60?new c.aBC(o,l.append({day:s%14})):a>14?new c.aBC(o,l):new c.aBC(e,n.append({day:a%2}))}generateRandomData({from:t,to:e},n){return new Array(c.JKS.lengthBetween(t,e)+1).fill(0).reduce(((e,a,i)=>[...e,[t.append({day:i}),this.isE2E?n:Math.max((i?e[i-1]?.[1]??0:n)+10*Math.random()-5,0)]]),[]).filter((([t])=>t.dayOfWeek()<5))}random(t){return[this.generateRandomData(t,100),this.generateRandomData(t,75),this.generateRandomData(t,50)]}}function E(t){return t.filter(((t,e)=>!(e%2)))}(a=R).ɵfac=function(t){return new(t||a)},a.ɵcmp=o.VBU({type:a,selectors:[["ng-component"]],decls:22,vars:9,consts:[["hint",""],[1,"controls"],[3,"tuiTextfieldCleaner"],["tuiLabel",""],["tuiInputDateRange","",3,"ngModelChange","maxLength","ngModel"],[4,"tuiTextfieldDropdown"],[1,"tui-space_left-4",3,"tuiTextfieldCleaner"],[1,"legend"],[1,"item"],[1,"axes",3,"axisXLabels","horizontalLines","tuiLineChartHint","verticalLines"],[1,"name"],[1,"chart",3,"height","value"],[1,"chart",3,"height","value","width"],[1,"tui-space_bottom-2"],[1,"value"]],template:function(t,e){if(1&t){const t=o.RV6();o.j41(0,"tui-notification")(1,"code"),o.EFF(2,"TuiLineDaysChart"),o.k0s(),o.EFF(3," is used to show data of several months to simplify working with different number of days in months\n"),o.k0s(),o.j41(4,"p",1)(5,"tui-textfield",2)(6,"label",3),o.EFF(7,"Data"),o.k0s(),o.j41(8,"input",4),o.mxI("ngModelChange",(function(n){return o.eBV(t),o.DH7(e.data,n)||(e.data=n),o.Njj(n)})),o.bIt("ngModelChange",(function(n){return o.eBV(t),o.Njj(e.onDataChange(n))})),o.k0s(),o.DNE(9,p,1,0,"tui-calendar-range",5),o.k0s(),o.j41(10,"tui-textfield",6)(11,"label",3),o.EFF(12,"Visible range"),o.k0s(),o.j41(13,"input",4),o.mxI("ngModelChange",(function(n){return o.eBV(t),o.DH7(e.show,n)||(e.show=n),o.Njj(n)})),o.k0s(),o.DNE(14,y,1,0,"tui-calendar-range",5),o.k0s()(),o.j41(15,"p",7),o.Z7z(16,C,3,1,"span",8,o.fX1),o.k0s(),o.DNE(18,M,3,5,"tui-axes",9),o.nI1(19,"async"),o.DNE(20,D,6,1,"ng-template",null,0,o.C5r)}if(2&t){let t;o.R7$(5),o.Y8G("tuiTextfieldCleaner",!1),o.R7$(3),o.Y8G("maxLength",e.maxLength),o.R50("ngModel",e.data),o.R7$(2),o.Y8G("tuiTextfieldCleaner",!1),o.R7$(3),o.Y8G("maxLength",e.maxLength),o.R50("ngModel",e.show),o.R7$(3),o.Dyx(e.days),o.R7$(2),o.vxM((t=o.bMT(19,7,e.labels(e.show)))?18:-1,t)}},dependencies:[r.Jj,l.YN,l.me,l.BC,l.vS,s.uy,c.LSY,g.N8k,f.OK,s.Lx,s.S,s.fd,c.uAY,h.wSS,m.z,h.Bwv,h.TB_,h.U9n],styles:['.axes[_ngcontent-%COMP%]{block-size:12.5rem}.controls[_ngcontent-%COMP%]{display:flex}.controls[_ngcontent-%COMP%]   tui-textfield[_ngcontent-%COMP%]{flex:1}.legend[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.item[_ngcontent-%COMP%]{color:var(--tui-chart-categorical-01);display:flex;align-items:center;margin:0 .75rem}.item[_ngcontent-%COMP%]:first-child{color:var(--tui-chart-categorical-08)}.item[_ngcontent-%COMP%]:last-child{color:var(--tui-chart-categorical-12)}.item[_ngcontent-%COMP%]:before{content:"";border-block-end:.125rem solid;inline-size:1rem;margin-inline-end:.5rem}.name[_ngcontent-%COMP%]{color:var(--tui-text-primary)}.value[_ngcontent-%COMP%]{color:#fff}.chart[_ngcontent-%COMP%]{color:var(--tui-chart-categorical-01);position:absolute;top:0;left:0;inline-size:100%;block-size:100%}.chart[_ngcontent-%COMP%]:first-child{color:var(--tui-chart-categorical-08)}.chart[_ngcontent-%COMP%]:last-child{color:var(--tui-chart-categorical-12)}'],changeDetection:0}),(0,i.Cg)([c.PEb],R.prototype,"getWidth",null),(0,i.Cg)([c.PEb],R.prototype,"getDate",null),(0,i.Cg)([c.PEb],R.prototype,"labels",null),(0,i.Cg)([c.PEb],R.prototype,"computeRange",null),(0,i.Cg)([c.PEb],R.prototype,"generateRandomData",null)}}]);